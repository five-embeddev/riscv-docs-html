<html>
<head>
<link rel="stylesheet" href="../../assets/docs.css">
<title>RISC-V Instruction Set Manual, Volume I: RISC-V User-Level ISA</title>
</head>
<body>

<table>
<tr><th colspan=2>Metadata Table</th></tr>
<tr><th>Manual Type</th><td> user</td></tr>
<tr><th>Spec Revision</th><td> </td></tr>
<tr><th>Spec Release Date</th><td> </td></tr>
<tr><th>Git Revision</th><td> riscv-priv-1.10</td></tr>
<tr><th>Git URL</th><td><a href=https://github.com/riscv/riscv-isa-manual.git>https://github.com/riscv/riscv-isa-manual.git</a></td></tr>
<tr><th>Source</th><td>src/rv32e.tex</td></tr>
<tr><th>Conversion Date</th><td>2023/11/12</td></tr>
<tr><th>License</th><td><a href=https://creativecommons.org/licenses/by/4.0/>CC-by-4.0</a></td></tr>
</table>


<section id="rv32e" data-number="1">
<h1 data-number="5"><span class="header-section-number">5</span> RV32E Base Integer Instruction Set, Version 1.9</h1>
<p>This chapter describes the RV32E base integer instruction set, which
is a reduced version of RV32I designed for embedded systems. The main
change is to reduce the number of integer registers to 16, and to
remove the counters that are mandatory in RV32I. This chapter only
outlines the differences between RV32E and RV32I, and so should be
read after Chapter <a href="rv32.html#rv32" data-reference-type="ref" data-reference="rv32">[rv32]</a>.</p>
<div class=commentary>
<p>RV32E was designed to provide an even smaller base core for embedded
microcontrollers. Although we had mentioned this possibility in
version 2.0 of this document, we initially resisted defining this
subset. However, given the demand for the smallest possible 32-bit
microcontroller, and in the interests of preempting fragmentation in
this space, we have now defined RV32E as a fourth standard base ISA in
addition to RV32I, RV64I, and RV128I. The E variant is only
standardized for the 32-bit address space width.</p>
</div>
<section id="rv32e-programmers-model" data-number="1.1">
<h2 data-number="5.1"><span class="header-section-number">5.1</span> RV32E Programmers’ Model</h2>
<p>RV32E reduces the integer register count to 16 general-purpose
registers, (<span><code>x0</code></span>–<span><code>x15</code></span>), where <span><code>x0</code></span> is a dedicated zero
register.</p>
<div class=commentary>
<p>We have found that in the small RV32I core designs, the upper 16
registers consume around one quarter of the total area of the core
excluding memories, thus their removal saves around 25% core area
with a corresponding core power reduction.</p>
</div>
<div class=commentary>
<p>This change requires a different calling convention and ABI. In
particular, RV32E is only used with a soft-float calling convention.
Systems with hardware floating-point must use an I base.</p>
</div>
</section>
<section id="rv32e-instruction-set" data-number="1.2">
<h2 data-number="5.2"><span class="header-section-number">5.2</span> RV32E Instruction Set</h2>
<p>RV32E uses the same instruction set encoding as RV32I, except that use
of register specifiers <span><code>x16</code></span>–<span><code>x31</code></span> in an instruction will
result in an illegal instruction exception being raised.</p>
<div class=commentary>
<p>Any future standard extensions will not make use of the instruction
bits freed up by the reduced register-specifier fields and so these
are available for non-standard extensions.</p>
</div>
<p>A further simplification is that the counter instructions (<span><code> rdcycle[h]</code></span>,<span><code>rdtime[h]</code></span>, <span><code>rdinstret[h]</code></span>) are no longer
mandatory.</p>
<div class=commentary>
<p>The mandatory counters require additional registers and logic, and can
be replaced with more application-specific facilities.</p>
</div>
</section>
<section id="rv32e-extensions" data-number="1.3">
<h2 data-number="5.3"><span class="header-section-number">5.3</span> RV32E Extensions</h2>
<p>RV32E can be extended with the M, A, and C user-level standard extensions.</p>
<div class=commentary>
<p>We do not intend to support hardware floating-point with the RV32E
subset. The savings from reduced register count become negligible in
the context of a hardware floating-point unit, and we wish to reduce
the proliferation of ABIs.</p>
</div>
<p>The privileged architecture of an RV32E system can include user mode
as well as machine mode, and the physical memory protection
scheme described in Volume II.</p>
<div class=commentary>
<p>We do not intend to support full Unix-style operating systems with the
RV32E subset. The savings from reduced register count become
negligible in the context of an OS-capable core, and we wish to avoid
OS fragmentation.</p>
</div>
</section>
</section>

</body>
</html>
