<html>
<head>
<title>RISC-V Instruction Set Manual, Volume I: RISC-V User-Level ISA</title>
</head>
<body>

<table>
<tr><th colspan=2>Metadata Table</th></tr>
<tr><th>Manual Type</th><td> user</td></tr>
<tr><th>Spec Revision</th><td> 20181106-Base-Ratification</td></tr>
<tr><th>Spec Release Date</th><td> </td></tr>
<tr><th>Git Revision</th><td> 20181106-Base-Ratification</td></tr>
<tr><th>Git URL</th><td><a href=https://github.com/riscv/riscv-isa-manual.git>https://github.com/riscv/riscv-isa-manual.git</a></td></tr>
<tr><th>Source</th><td>src/memory-model-herd.tex</td></tr>
<tr><th>Conversion Date</th><td>2023/09/28</td></tr>
<tr><th>License</th><td><a href=https://creativecommons.org/licenses/by/4.0/>CC-by-4.0</a></td></tr>
</table>


<h1 id="sec:herd">Formal Axiomatic Specification in Herd</h1>
<p>The tool <span class="sans-serif">herd</span> takes a memory model and a litmus test as input and simulates the execution of the test on top of the memory model. Memory models are written in the domain specific language <span class="smallcaps">Cat</span>. This section provides two <span class="smallcaps">Cat</span> memory model of RVWMO. The first model, Figure <a href="memory-model-herd.html#fig:herd2" data-reference-type="ref" data-reference="fig:herd2">2</a>, follows the <em>global memory order</em>, Chapter <a href="rvwmo.html#ch:memorymodel" data-reference-type="ref" data-reference="ch:memorymodel">[ch:memorymodel]</a>, definition of RVWMO, as much as is possible for a <span class="smallcaps">Cat</span> model. The second model, Figure <a href="memory-model-herd.html#fig:herd3" data-reference-type="ref" data-reference="fig:herd3">3</a>, is an equivalent, more efficient, partial order based RVWMO model.</p>
<p>The simulator <span class="sans-serif">herd</span> is part of the <span class="sans-serif">diy</span> tool suite — see <a href="http://diy.inria.fr">http://diy.inria.fr</a> for software and documentation. The models and more are available online at <a href="http://diy.inria.fr/cats7/riscv/">http://diy.inria.fr/cats7/riscv/</a>.</p>
<figure>
<img src="tmp.20181106-Base-Ratification//memory-model-herd_00.svg" alt="riscv-defs.cat, a herd definition of preserved program order (1/3)" id="fig:herd1" /><figcaption><span>riscv-defs.cat</span>, a herd definition of preserved program order (1/3)<span label="fig:herd1"></span></figcaption>
</figure>
<figure>
<img src="tmp.20181106-Base-Ratification//memory-model-herd_01.svg" alt="riscv.cat, a herd version of the RVWMO memory model (2/3)" id="fig:herd2" /><figcaption><span>riscv.cat</span>, a herd version of the RVWMO memory model (2/3)<span label="fig:herd2"></span></figcaption>
</figure>
<figure>
<img src="tmp.20181106-Base-Ratification//memory-model-herd_02.svg" alt="riscv.cat, an alternative herd presentation of the RVWMO memory model (3/3)" id="fig:herd3" /><figcaption><span>riscv.cat</span>, an alternative herd presentation of the RVWMO memory model (3/3)<span label="fig:herd3"></span></figcaption>
</figure>

</body>
</html>
