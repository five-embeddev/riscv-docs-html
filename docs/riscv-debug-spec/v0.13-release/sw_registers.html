<html>
<head>
<title>RISC-V External Debug Support</title>
</head>
<body>

<table>
<tr><th colspan=2>Metadata Table</th></tr>
<tr><th>Manual Type</th><td> debug</td></tr>
<tr><th>Spec Revision</th><td> 0.13.2</td></tr>
<tr><th>Spec Release Date</th><td> 2019-03-25</td></tr>
<tr><th>Git Revision</th><td> task_group_vote-4-g4e0bb0f</td></tr>
<tr><th>Git URL</th><td><a href=https://github.com/riscv/riscv-debug-spec.git>https://github.com/riscv/riscv-debug-spec.git</a></td></tr>
<tr><th>Source</th><td>sw_registers.tex</td></tr>
<tr><th>Conversion Date</th><td>2023/09/28</td></tr>
<tr><th>License</th><td><a href=https://creativecommons.org/licenses/by/4.0/>CC-by-4.0</a></td></tr>
</table>


<p>A virtual register is one that doesn’t exist directly in the hardware, but
that the debugger exposes as if it does. Debug software should implement
them, but hardware can skip this section. Virtual registers exist to give
users access to functionality that’s not part of standard debuggers without
requiring them to carefully modify debug registers while the debugger is
also accessing those same registers.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: right;">Address</th>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Page</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">virtual</td>
<td style="text-align: left;">Privilege Level (<span>priv</span>)</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<h2 id="privilege-level-priv-at-virtual">Privilege Level (<span>priv</span>, at virtual)</h2>
<p><span id="priv" label="priv">[priv]</span>
Users can read this register to inspect the privilege level that
the hart was running in when the hart halted.
Users can write this register to change the privilege level that
the hart will run in when it resumes.</p>
<p>This register contains from <span><span>dcsr</span></span>, but in a place that the user
is expected to access. The user should not access <span><span>dcsr</span></span>directly,
because doing so might interfere with the debugger.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: right;">Encoding</th>
<th style="text-align: left;">Privilege Level</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: left;">User/Application</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Supervisor</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Machine</td>
</tr>
</tbody>
</table>
<p><img src="tmp.v0.13-release//sw_registers_00.svg" alt="image" /></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Description</th>
<th style="text-align: center;">Access</th>
<th style="text-align: left;">Reset</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span id="prv" label="prv">[prv]</span>
|prv|</td>
<td style="text-align: left;">Contains the privilege level the hart was operating in when Debug
Mode was entered. The encoding is described in Table
<a href="sw_registers.html#tab:privlevel" data-reference-type="ref" data-reference="tab:privlevel">[tab:privlevel]</a>, and matches the privilege level encoding from
the Privileged Spec. A user can write this
value to change the hart’s privilege level when exiting Debug Mode.</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">0</td>
</tr>
</tbody>
</table>

</body>
</html>
